<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Functions Interceptor</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100vw - 20px);
            max-width: 1200px;
            z-index: 10001;
            background: rgba(26, 26, 26, 0.98);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            max-height: 120px;
            min-height: 100px;
            overflow: hidden;
            resize: both;
            display: flex;
            gap: 15px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 10px;
            border: 2px solid #00ff00;
        }
        
        .section {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 8px;
            background: rgba(42, 42, 42, 0.8);
            border-radius: 8px;
            border: 1px solid #555;
        }
        
        .section-title {
            font-size: 12px;
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .section-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .controls {
            display: flex;
            gap: 6px;
            margin-bottom: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 11px;
            white-space: nowrap;
        }
        
        .btn-start {
            background: #4CAF50;
            color: white;
        }
        
        .btn-stop {
            background: #F44336;
            color: white;
        }
        
        .btn-clear {
            background: #FF9800;
            color: white;
        }
        
        .btn:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }
        
        .stats {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border: 1px solid #444;
        }
        
        .middle-panel {
            position: fixed;
            top: 140px;
            left: 10px;
            right: 10px;
            width: calc(100vw - 20px);
            height: 120px;
            background: rgba(40, 40, 40, 0.95);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
            z-index: 10001;
            border: 2px solid #00ff00;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            resize: vertical;
            min-height: 80px;
            max-height: 200px;
            overflow: hidden;
        }
        
        .output-panel {
            position: fixed;
            top: 270px;
            left: 10px;
            right: 10px;
            width: calc(100vw - 20px);
            height: calc(100vh - 290px);
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.95);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 20px;
            z-index: 10000;
            border: 3px solid #00ff00;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
            resize: both;
            min-width: 400px;
            min-height: 200px;
        }
        
        .log-entry {
            margin: 4px 0;
            padding: 8px 12px;
            border-left: 4px solid;
            background: rgba(255, 255, 255, 0.1);
            word-break: break-all;
            font-size: 13px;
            border-radius: 4px;
            transition: all 0.2s;
            line-height: 1.4;
            opacity: 1;
        }
        
        .log-entry:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(2px);
        }
        
        .log-info { border-color: #4CAF50; }
        .log-warn { border-color: #FF9800; }
        .log-error { border-color: #F44336; }
        .log-eval { border-color: #2196F3; }
        .log-analysis { 
            border-color: #9C27B0; 
            background: rgba(156, 39, 176, 0.3); 
            border-left-width: 6px;
            font-weight: bold;
        }
        .log-script { 
            border-color: #FF5722; 
            background: rgba(255, 87, 34, 0.3); 
            border-left-width: 6px;
            font-weight: bold;
        }
        
        /* –ö–∞—Å—Ç–æ–º–Ω–∞—è –ø–æ–ª–æ—Å–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
        .output-panel::-webkit-scrollbar {
            width: 12px;
        }
        
        .output-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
        }
        
        .output-panel::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 6px;
            border: 2px solid rgba(0, 0, 0, 0.3);
        }
        
        .output-panel::-webkit-scrollbar-thumb:hover {
            background: #00cc00;
        }
        .log-function { border-color: #9C27B0; }
        
        .test-buttons {
            margin-top: 8px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .test-btn {
            background: #2196F3;
            color: white;
            padding: 4px 8px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –°–µ–∫—Ü–∏—è 1: –ù–∞–∑–≤–∞–Ω–∏–µ –ü–û -->
        <div class="section">
            <div class="section-title">üõ°Ô∏è System Functions Interceptor</div>
            <div class="section-content">
                <div style="text-align: center; font-size: 11px; color: #888; margin-bottom: 8px;">
                    –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π JavaScript
                </div>
                <button id="toggleLogPanel" onclick="toggleLogPanel()" style="
                    background: #4CAF50; 
                    color: white; 
                    border: none; 
                    padding: 6px 12px; 
                    border-radius: 4px; 
                    cursor: pointer; 
                    font-size: 11px; 
                    width: 100%;
                " title="Ctrl+H –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è">üìã –°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å –ª–æ–≥–∞</button>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è 2: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="section">
            <div class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="section-content">
                <div style="font-size: 11px; margin-bottom: 3px;">
                    –ü–µ—Ä–µ—Ö–≤–∞—Ç–æ–≤: <span id="interception-count" style="color: #00ff00; font-weight: bold;">0</span>
                </div>
                <div style="font-size: 11px;">
                    –°—Ç–∞—Ç—É—Å: <span id="status" style="color: #ff4444; font-weight: bold;">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                </div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ü–∏—è 3: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ -->
        <div class="section">
            <div class="section-title">üì¶ –ó–∞–≥—Ä—É–∑–∫–∞ JS —Ñ–∞–π–ª–æ–≤</div>
            <div class="section-content">
                <input type="text" id="scriptFileName" placeholder="–ò–º—è JS —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Uq3o4_B3Mp.js)" 
                       style="width: 100%; padding: 6px; border: 1px solid #555; border-radius: 4px; background: #1a1a1a; color: #00ff00; font-family: 'Courier New', monospace; font-size: 11px; margin-bottom: 6px;">
                <div style="display: flex; gap: 4px; margin-bottom: 4px;">
                    <button class="test-btn" onclick="loadScriptFile()" style="flex: 1; padding: 4px 6px; font-size: 10px;">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <button class="test-btn" onclick="analyzeScriptFile()" style="flex: 1; padding: 4px 6px; font-size: 10px;">üîç –ê–Ω–∞–ª–∏–∑</button>
                </div>
                <div style="color: #888; font-size: 10px; text-align: center;">
                    –§–∞–π–ª –≤ —Ç–æ–º –∂–µ –∫–∞—Ç–∞–ª–æ–≥–µ
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–∞–º–∏ -->
    <div class="middle-panel" id="middlePanel">
        <h3 style="margin: 0 0 8px 0; font-size: 14px;">üéõÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</h3>
        <div class="controls">
            <button class="btn btn-start" onclick="startInterception()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
            <button class="btn btn-stop" onclick="stopInterception()">üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            <button class="btn btn-clear" onclick="clearOutput()">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="btn" id="debugToggle" onclick="toggleDebugMode()" style="background: #666; color: white;">üêõ –û—Ç–ª–∞–¥–∫–∞</button>
            <button class="btn" onclick="resizeMainPanel('small')" style="background: #FF9800; color: white;">üìè –ú–∞–ª–µ–Ω—å–∫–∞—è</button>
            <button class="btn" onclick="resizeMainPanel('large')" style="background: #4CAF50; color: white;">üìè –ë–æ–ª—å—à–∞—è</button>
            <button class="btn" onclick="resizeMiddlePanel('small')" style="background: #9C27B0; color: white;">üìè –ü–∞–Ω–µ–ª—å‚àí</button>
            <button class="btn" onclick="resizeMiddlePanel('large')" style="background: #E91E63; color: white;">üìè –ü–∞–Ω–µ–ª—å+</button>
        </div>
        
        <div class="test-buttons">
            <h4 style="margin: 0 8px 0 0; font-size: 12px; display: inline;">üß™ –¢–µ—Å—Ç—ã:</h4>
            <button class="test-btn" onclick="testEval()">üß™ eval()</button>
            <button class="test-btn" onclick="testFunction()">üß™ Function()</button>
            <button class="test-btn" onclick="testSetTimeout()">‚è∞ setTimeout()</button>
            <button class="test-btn" onclick="testSetInterval()">üîÑ setInterval()</button>
            <button class="test-btn" onclick="testFetch()">üåê fetch()</button>
            <button class="test-btn" onclick="testLocalStorage()">üíæ localStorage</button>
            <button class="test-btn" onclick="testGeolocation()">üìç Geolocation</button>
            <button class="test-btn" onclick="testClipboard()">üìã Clipboard</button>
            <button class="test-btn" onclick="testHistory()">üìú History</button>
            <button class="test-btn" onclick="testLocation()">üåç Location</button>
            <button class="test-btn" onclick="testConsole()">üñ•Ô∏è Console</button>
            <button class="test-btn" onclick="testPerformance()">‚è±Ô∏è Performance</button>
            <button class="test-btn" onclick="testObservers()">üëÅÔ∏è Observers</button>
        </div>
    </div>

    <script>
        // ==================== OUTPUT LOGGER ====================
        class OutputLogger {
            constructor() {
                this.createOutputPanel();
                this.debugMode = false; // –û—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω
            }
            
            createOutputPanel() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –ø–∞–Ω–µ–ª—å
                let panel = document.querySelector('.output-panel');
                if (panel) {
                    this.outputElement = panel;
                    this.isCollapsed = false;
                    return;
                }
                
                panel = document.createElement('div');
                panel.className = 'output-panel';
                panel.style.resize = 'both'; // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
                
                const title = document.createElement('div');
                title.innerHTML = '<b>üìã –õ–æ–≥ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞:</b> <span id="log-count" style="color: #888;">(0 –∑–∞–ø–∏—Å–µ–π)</span>';
                title.style.marginBottom = '10px';
                title.style.borderBottom = '1px solid #00ff00';
                title.style.paddingBottom = '5px';
                title.style.position = 'relative';
                
                const clearBtn = document.createElement('button');
                clearBtn.textContent = '–û—á–∏—Å—Ç–∏—Ç—å';
                clearBtn.style.cssText = `
                    position: absolute; top: 0px; right: 200px;
                    background: #ff4444; color: white; border: none;
                    padding: 3px 10px; border-radius: 4px; cursor: pointer;
                    font-size: 11px; font-weight: bold;
                `;
                clearBtn.onclick = () => this.clearOutput();
                
                const scrollToBottomBtn = document.createElement('button');
                scrollToBottomBtn.textContent = '‚¨á';
                scrollToBottomBtn.style.cssText = `
                    position: absolute; top: 0px; right: 160px;
                    background: #2196F3; color: white; border: none;
                    padding: 3px 8px; border-radius: 4px; cursor: pointer;
                    font-size: 11px; font-weight: bold;
                `;
                scrollToBottomBtn.onclick = () => this.scrollToBottom();
                
                const resizeSmallBtn = document.createElement('button');
                resizeSmallBtn.textContent = 'üìè‚àí';
                resizeSmallBtn.style.cssText = `
                    position: absolute; top: 0px; right: 120px;
                    background: #FF9800; color: white; border: none;
                    padding: 3px 8px; border-radius: 4px; cursor: pointer;
                    font-size: 11px; font-weight: bold;
                `;
                resizeSmallBtn.onclick = () => resizeLogPanel('small');
                
                const resizeLargeBtn = document.createElement('button');
                resizeLargeBtn.textContent = 'üìè+';
                resizeLargeBtn.style.cssText = `
                    position: absolute; top: 0px; right: 80px;
                    background: #4CAF50; color: white; border: none;
                    padding: 3px 8px; border-radius: 4px; cursor: pointer;
                    font-size: 11px; font-weight: bold;
                `;
                resizeLargeBtn.onclick = () => resizeLogPanel('large');
                
                const toggleBtn = document.createElement('button');
                toggleBtn.textContent = '‚àí';
                toggleBtn.style.cssText = `
                    position: absolute; top: 0px; right: 5px;
                    background: #4CAF50; color: white; border: none;
                    padding: 3px 8px; border-radius: 4px; cursor: pointer;
                    font-size: 11px; font-weight: bold;
                `;
                toggleBtn.onclick = () => this.togglePanel();
                
                panel.appendChild(title);
                panel.appendChild(clearBtn);
                panel.appendChild(scrollToBottomBtn);
                panel.appendChild(resizeSmallBtn);
                panel.appendChild(resizeLargeBtn);
                panel.appendChild(toggleBtn);
                document.body.appendChild(panel);
                
                this.outputElement = panel;
                this.isCollapsed = false;
            }
            
            logToConsole(message, data = null) {
                console.log('%cüîç ' + message, 'color: #4CAF50; font-weight: bold;', data || '');
            }
            
            logToPage(message, type = 'info') {
                const div = document.createElement('div');
                div.className = `log-entry log-${type}`;
                
                const timestamp = new Date().toLocaleTimeString();
                div.innerHTML = `<span style="color: #888;">[${timestamp}]</span> ${message}`;
                
                this.outputElement.appendChild(div);
                this.outputElement.scrollTop = this.outputElement.scrollHeight;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∑–∞–ø–∏—Å–µ–π
                this.updateLogCount();
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤ –¥–æ 5000 –∑–∞–ø–∏—Å–µ–π
                if (this.outputElement.children.length > 5000) {
                    this.outputElement.removeChild(this.outputElement.children[3]);
                    this.updateLogCount();
                }
                
                // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å —Ç–æ–ª—å–∫–æ –≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
                if (this.debugMode) {
                    console.log(`[${type.toUpperCase()}] ${message}`);
                }
            }
            
            updateLogCount() {
                const logCount = this.outputElement.querySelector('#log-count');
                if (logCount) {
                    const entryCount = this.outputElement.querySelectorAll('.log-entry').length;
                    let status = '';
                    if (entryCount > 4000) status = ' üî•';
                    else if (entryCount > 3000) status = ' ‚ö°';
                    else if (entryCount > 2000) status = ' üìä';
                    else if (entryCount > 1000) status = ' üìà';
                    else if (entryCount > 500) status = ' üìã';
                    logCount.textContent = `(${entryCount} –∑–∞–ø–∏—Å–µ–π${status})`;
                }
            }
            
            clearOutput() {
                const children = Array.from(this.outputElement.children);
                children.slice(3).forEach(child => child.remove());
                this.logToPage('üìã –õ–æ–≥ –æ—á–∏—â–µ–Ω', 'info');
            }
            
            scrollToBottom() {
                this.outputElement.scrollTop = this.outputElement.scrollHeight;
            }
            
            togglePanel() {
                this.isCollapsed = !this.isCollapsed;
                const content = this.outputElement.querySelectorAll('.log-entry');
                const toggleBtn = this.outputElement.querySelector('button:last-child');
                
                if (this.isCollapsed) {
                    content.forEach(entry => entry.style.display = 'none');
                    toggleBtn.textContent = '+';
                    this.outputElement.style.height = '80px';
                } else {
                    content.forEach(entry => entry.style.display = 'block');
                    toggleBtn.textContent = '‚àí';
                    this.outputElement.style.height = '70vh';
                }
            }
        }

        // ==================== SYSTEM INTERCEPTOR ====================
        class SystemInterceptor {
            constructor() {
                this.logger = new OutputLogger();
                this.originals = {};
                this.interceptionCount = 0;
                this.isActive = false;
            }
            
            startInterception() {
                if (this.isActive) return;
                
                this.interceptEval();
                this.interceptFunction();
                this.interceptTimers();
                this.interceptDOM();
                this.interceptNetwork();
                this.interceptWebSockets();
                this.interceptWebRTC();
                this.interceptStorage();
                this.interceptGeolocation();
                this.interceptMediaDevices();
                this.interceptCrypto();
                this.interceptWorkers();
                this.interceptServiceWorkers();
                this.interceptNotifications();
                this.interceptClipboard();
                this.interceptHistory();
                this.interceptLocation();
                this.interceptNavigator();
                this.interceptWindow();
                this.interceptDocument();
                this.interceptConsole();
                this.interceptPerformance();
                this.interceptMutationObserver();
                this.interceptIntersectionObserver();
                this.interceptResizeObserver();
                
                this.isActive = true;
                this.updateStats();
                
                this.logger.logToPage('üöÄ <b>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!</b>', 'info');
                this.logger.logToConsole('–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
            }
            
            stopInterception() {
                if (!this.isActive) return;
                
                this.restoreOriginals();
                this.isActive = false;
                this.updateStats();
                
                this.logger.logToPage('üõë <b>–ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</b>', 'info');
                this.logger.logToConsole('–ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
            }
            
            interceptEval() {
                this.originals.eval = window.eval;
                const self = this;
                
                window.eval = function(code) {
                    self.interceptionCount++;
                    const evalId = self.interceptionCount;
                    
                    const logData = {
                        id: evalId,
                        code: code.substring(0, 200) + (code.length > 200 ? '...' : ''),
                        length: code.length
                    };
                    
                    self.logger.logToConsole(`EVAL #${evalId}`, logData);
                    self.logger.logToPage(
                        `üîì <b>eval</b> #${evalId}: ${code.length} chars | ` +
                        `<span title="${self.escapeHtml(code)}">${self.escapeHtml(logData.code)}</span>`,
                        'eval'
                    );
                    
                    try {
                        const result = self.originals.eval.call(this, code);
                        self.logger.logToPage(
                            `‚úÖ <b>eval</b> #${evalId} –∑–∞–≤–µ—Ä—à–µ–Ω | —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${typeof result}`,
                            'info'
                        );
                        return result;
                    } catch (error) {
                        self.logger.logToPage(
                            `‚ùå <b>eval</b> #${evalId} –æ—à–∏–±–∫–∞: ${error.message}`,
                            'error'
                        );
                        throw error;
                    }
                };
            }
            
            interceptFunction() {
                this.originals.Function = window.Function;
                const self = this; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ this
                
                window.Function = function(...args) {
                    self.interceptionCount++;
                    const funcId = self.interceptionCount;
                    
                    const body = args.length > 0 ? args[args.length - 1] : '';
                    const params = args.slice(0, -1);
                    
                    self.logger.logToConsole(`FUNCTION #${funcId}`, {
                        parameters: params,
                        bodyLength: body.length
                    });
                    
                    self.logger.logToPage(
                        `üîß <b>Function</b> #${funcId}: ${params.length} params, ` +
                        `${body.length} chars —Ç–µ–ª–∞`,
                        'function'
                    );
                    
                    return self.originals.Function.apply(this, args);
                };
            }
            
            interceptTimers() {
                this.originals.setTimeout = window.setTimeout;
                const self = this;
                window.setTimeout = function(callback, delay, ...args) {
                    self.logger.logToPage(
                        `‚è∞ <b>setTimeout</b>: ${delay}ms | ` +
                        `callback: ${callback.name || 'anonymous'}`,
                        'info'
                    );
                    return self.originals.setTimeout.call(this, callback, delay, ...args);
                };
                
                this.originals.setInterval = window.setInterval;
                window.setInterval = function(callback, delay, ...args) {
                    self.logger.logToPage(
                        `üîÑ <b>setInterval</b>: ${delay}ms | ` +
                        `callback: ${callback.name || 'anonymous'}`,
                        'info'
                    );
                    return self.originals.setInterval.call(this, callback, delay, ...args);
                };
            }
            
            interceptDOM() {
                this.originals.documentWrite = document.write;
                const self = this;
                document.write = function(...args) {
                    const content = args.join('');
                    self.logger.logToPage(
                        `üìù <b>document.write</b>: ${content.length} chars | ` +
                        `"${content.substring(0, 50)}${content.length > 50 ? '...' : ''}"`,
                        'warn'
                    );
                    return self.originals.documentWrite.apply(this, args);
                };
            }
            
            interceptNetwork() {
                if (window.fetch) {
                    this.originals.fetch = window.fetch;
                    const self = this;
                    window.fetch = function(url, options) {
                        self.logger.logToPage(
                            `üåê <b>fetch</b>: ${url} | method: ${options?.method || 'GET'}`,
                            'info'
                        );
                        
                        return self.originals.fetch.call(this, url, options)
                            .then(response => {
                                self.logger.logToPage(
                                    `‚úÖ <b>fetch</b> –∑–∞–≤–µ—Ä—à–µ–Ω: ${url} | status: ${response.status}`,
                                    'info'
                                );
                                return response;
                            })
                            .catch(error => {
                                self.logger.logToPage(
                                    `‚ùå <b>fetch</b> –æ—à–∏–±–∫–∞: ${url} | error: ${error.message}`,
                                    'error'
                                );
                                throw error;
                            });
                    };
                }
                
                // XMLHttpRequest
                if (window.XMLHttpRequest) {
                    this.originals.XMLHttpRequest = window.XMLHttpRequest;
                    const self = this;
                    window.XMLHttpRequest = function() {
                        const xhr = new self.originals.XMLHttpRequest();
                        const originalOpen = xhr.open;
                        const originalSend = xhr.send;
                        
                        xhr.open = function(method, url, ...args) {
                            self.logger.logToPage(
                                `üì° <b>XMLHttpRequest.open</b>: ${method} ${url}`,
                                'info'
                            );
                            return originalOpen.call(this, method, url, ...args);
                        };
                        
                        xhr.send = function(data) {
                            self.logger.logToPage(
                                `üì§ <b>XMLHttpRequest.send</b>: ${data ? data.length + ' bytes' : 'no data'}`,
                                'info'
                            );
                            return originalSend.call(this, data);
                        };
                        
                        return xhr;
                    };
                }
            }
            
            interceptWebSockets() {
                if (window.WebSocket) {
                    this.originals.WebSocket = window.WebSocket;
                    const self = this;
                    window.WebSocket = function(url, protocols) {
                        self.logger.logToPage(
                            `üîå <b>WebSocket</b>: ${url} | protocols: ${protocols || 'none'}`,
                            'info'
                        );
                        
                        const ws = new self.originals.WebSocket(url, protocols);
                        
                        const originalSend = ws.send;
                        ws.send = function(data) {
                            self.logger.logToPage(
                                `üì§ <b>WebSocket.send</b>: ${data.length} bytes`,
                                'info'
                            );
                            return originalSend.call(this, data);
                        };
                        
                        return ws;
                    };
                }
            }
            
            interceptWebRTC() {
                if (window.RTCPeerConnection) {
                    this.originals.RTCPeerConnection = window.RTCPeerConnection;
                    const self = this;
                    window.RTCPeerConnection = function(config) {
                        self.logger.logToPage(
                            `üìπ <b>WebRTC</b>: RTCPeerConnection —Å–æ–∑–¥–∞–Ω`,
                            'warn'
                        );
                        return new self.originals.RTCPeerConnection(config);
                    };
                }
            }
            
            interceptStorage() {
                // localStorage
                if (window.localStorage) {
                    const self = this;
                    const originalSetItem = localStorage.setItem;
                    const originalGetItem = localStorage.getItem;
                    const originalRemoveItem = localStorage.removeItem;
                    
                    localStorage.setItem = function(key, value) {
                        self.logger.logToPage(
                            `üíæ <b>localStorage.setItem</b>: ${key} = ${value}`,
                            'info'
                        );
                        return originalSetItem.call(this, key, value);
                    };
                    
                    localStorage.getItem = function(key) {
                        self.logger.logToPage(
                            `üíæ <b>localStorage.getItem</b>: ${key}`,
                            'info'
                        );
                        return originalGetItem.call(this, key);
                    };
                    
                    localStorage.removeItem = function(key) {
                        self.logger.logToPage(
                            `üíæ <b>localStorage.removeItem</b>: ${key}`,
                            'info'
                        );
                        return originalRemoveItem.call(this, key);
                    };
                }
                
                // sessionStorage
                if (window.sessionStorage) {
                    const self = this;
                    const originalSetItem = sessionStorage.setItem;
                    const originalGetItem = sessionStorage.getItem;
                    const originalRemoveItem = sessionStorage.removeItem;
                    
                    sessionStorage.setItem = function(key, value) {
                        self.logger.logToPage(
                            `üóÇÔ∏è <b>sessionStorage.setItem</b>: ${key} = ${value}`,
                            'info'
                        );
                        return originalSetItem.call(this, key, value);
                    };
                    
                    sessionStorage.getItem = function(key) {
                        self.logger.logToPage(
                            `üóÇÔ∏è <b>sessionStorage.getItem</b>: ${key}`,
                            'info'
                        );
                        return originalGetItem.call(this, key);
                    };
                    
                    sessionStorage.removeItem = function(key) {
                        self.logger.logToPage(
                            `üóÇÔ∏è <b>sessionStorage.removeItem</b>: ${key}`,
                            'info'
                        );
                        return originalRemoveItem.call(this, key);
                    };
                }
            }
            
            interceptGeolocation() {
                if (navigator.geolocation) {
                    const self = this;
                    const originalGetCurrentPosition = navigator.geolocation.getCurrentPosition;
                    const originalWatchPosition = navigator.geolocation.watchPosition;
                    
                    navigator.geolocation.getCurrentPosition = function(success, error, options) {
                        self.logger.logToPage(
                            `üìç <b>Geolocation.getCurrentPosition</b>`,
                            'warn'
                        );
                        return originalGetCurrentPosition.call(this, success, error, options);
                    };
                    
                    navigator.geolocation.watchPosition = function(success, error, options) {
                        self.logger.logToPage(
                            `üìç <b>Geolocation.watchPosition</b>`,
                            'warn'
                        );
                        return originalWatchPosition.call(this, success, error, options);
                    };
                }
            }
            
            interceptMediaDevices() {
                if (navigator.mediaDevices) {
                    const self = this;
                    const originalGetUserMedia = navigator.mediaDevices.getUserMedia;
                    
                    if (originalGetUserMedia) {
                        navigator.mediaDevices.getUserMedia = function(constraints) {
                            self.logger.logToPage(
                                `üì∑ <b>getUserMedia</b>: ${JSON.stringify(constraints)}`,
                                'warn'
                            );
                            return originalGetUserMedia.call(this, constraints);
                        };
                    }
                }
            }
            
            interceptCrypto() {
                if (window.crypto) {
                    const self = this;
                    const originalGetRandomValues = crypto.getRandomValues;
                    const originalSubtle = crypto.subtle;
                    
                    if (originalGetRandomValues) {
                        crypto.getRandomValues = function(array) {
                            self.logger.logToPage(
                                `üîê <b>crypto.getRandomValues</b>: ${array.length} bytes`,
                                'info'
                            );
                            return originalGetRandomValues.call(this, array);
                        };
                    }
                }
            }
            
            interceptWorkers() {
                if (window.Worker) {
                    this.originals.Worker = window.Worker;
                    const self = this;
                    window.Worker = function(scriptURL, options) {
                        self.logger.logToPage(
                            `üë∑ <b>Worker</b>: ${scriptURL}`,
                            'info'
                        );
                        return new self.originals.Worker(scriptURL, options);
                    };
                }
            }
            
            interceptServiceWorkers() {
                if (navigator.serviceWorker) {
                    const self = this;
                    const originalRegister = navigator.serviceWorker.register;
                    
                    navigator.serviceWorker.register = function(scriptURL, options) {
                        self.logger.logToPage(
                            `‚öôÔ∏è <b>ServiceWorker.register</b>: ${scriptURL}`,
                            'warn'
                        );
                        return originalRegister.call(this, scriptURL, options);
                    };
                }
            }
            
            interceptNotifications() {
                if (window.Notification) {
                    const self = this;
                    const originalRequestPermission = Notification.requestPermission;
                    const originalConstructor = window.Notification;
                    
                    Notification.requestPermission = function() {
                        self.logger.logToPage(
                            `üîî <b>Notification.requestPermission</b>`,
                            'warn'
                        );
                        return originalRequestPermission.call(this);
                    };
                    
                    window.Notification = function(title, options) {
                        self.logger.logToPage(
                            `üîî <b>Notification</b>: ${title}`,
                            'warn'
                        );
                        return new originalConstructor(title, options);
                    };
                }
            }
            
            interceptClipboard() {
                if (navigator.clipboard) {
                    const self = this;
                    const originalWriteText = navigator.clipboard.writeText;
                    const originalReadText = navigator.clipboard.readText;
                    
                    if (originalWriteText) {
                        navigator.clipboard.writeText = function(text) {
                            self.logger.logToPage(
                                `üìã <b>clipboard.writeText</b>: ${text.length} chars`,
                                'warn'
                            );
                            return originalWriteText.call(this, text);
                        };
                    }
                    
                    if (originalReadText) {
                        navigator.clipboard.readText = function() {
                            self.logger.logToPage(
                                `üìã <b>clipboard.readText</b>`,
                                'warn'
                            );
                            return originalReadText.call(this);
                        };
                    }
                }
            }
            
            interceptHistory() {
                const self = this;
                
                try {
                    const originalPushState = history.pushState;
                    history.pushState = function(state, title, url) {
                        self.logger.logToPage(
                            `üìú <b>history.pushState</b>: ${url}`,
                            'info'
                        );
                        return originalPushState.call(this, state, title, url);
                    };
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>history.pushState</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
                
                try {
                    const originalReplaceState = history.replaceState;
                    history.replaceState = function(state, title, url) {
                        self.logger.logToPage(
                            `üìú <b>history.replaceState</b>: ${url}`,
                            'info'
                        );
                        return originalReplaceState.call(this, state, title, url);
                    };
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>history.replaceState</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
            }
            
            interceptLocation() {
                const self = this;
                
                // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
                try {
                    const originalAssign = location.assign;
                    if (originalAssign) {
                        location.assign = function(url) {
                            self.logger.logToPage(
                                `üåç <b>location.assign</b>: ${url}`,
                                'warn'
                            );
                            return originalAssign.call(this, url);
                        };
                    }
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>location.assign</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
                
                try {
                    const originalReplace = location.replace;
                    if (originalReplace) {
                        location.replace = function(url) {
                            self.logger.logToPage(
                                `üåç <b>location.replace</b>: ${url}`,
                                'warn'
                            );
                            return originalReplace.call(this, url);
                        };
                    }
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>location.replace</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
            }
            
            interceptNavigator() {
                const self = this;
                
                // navigator.sendBeacon
                try {
                    if (navigator.sendBeacon) {
                        const originalSendBeacon = navigator.sendBeacon;
                        navigator.sendBeacon = function(url, data) {
                            self.logger.logToPage(
                                `üì° <b>navigator.sendBeacon</b>: ${url}`,
                                'info'
                            );
                            return originalSendBeacon.call(this, url, data);
                        };
                    }
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>navigator.sendBeacon</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
            }
            
            interceptWindow() {
                const self = this;
                
                // window.open
                try {
                    const originalOpen = window.open;
                    window.open = function(url, name, specs) {
                        self.logger.logToPage(
                            `ü™ü <b>window.open</b>: ${url}`,
                            'warn'
                        );
                        return originalOpen.call(this, url, name, specs);
                    };
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>window.open</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
                
                // window.postMessage
                try {
                    const originalPostMessage = window.postMessage;
                    window.postMessage = function(message, targetOrigin, transfer) {
                        self.logger.logToPage(
                            `üì® <b>window.postMessage</b>: ${message}`,
                            'info'
                        );
                        return originalPostMessage.call(this, message, targetOrigin, transfer);
                    };
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>window.postMessage</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
            }
            
            interceptDocument() {
                const self = this;
                
                // document.cookie
                try {
                    const originalCookieDescriptor = Object.getOwnPropertyDescriptor(Document.prototype, 'cookie');
                    if (originalCookieDescriptor) {
                        Object.defineProperty(document, 'cookie', {
                            get: function() {
                                self.logger.logToPage(
                                    `üç™ <b>document.cookie (get)</b>`,
                                    'info'
                                );
                                return originalCookieDescriptor.get.call(this);
                            },
                            set: function(value) {
                                self.logger.logToPage(
                                    `üç™ <b>document.cookie (set)</b>: ${value}`,
                                    'info'
                                );
                                return originalCookieDescriptor.set.call(this, value);
                            }
                        });
                    }
                } catch (error) {
                    self.logger.logToPage(
                        `‚ö†Ô∏è <b>document.cookie</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                        'warn'
                    );
                }
            }
            
            interceptConsole() {
                const self = this;
                const methods = ['log', 'warn', 'error', 'info', 'debug'];
                
                methods.forEach(method => {
                    try {
                        if (console[method]) {
                            const original = console[method];
                            console[method] = function(...args) {
                                self.logger.logToPage(
                                    `üñ•Ô∏è <b>console.${method}</b>: ${args.join(' ')}`,
                                    'info'
                                );
                                return original.apply(this, args);
                            };
                        }
                    } catch (error) {
                        self.logger.logToPage(
                            `‚ö†Ô∏è <b>console.${method}</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                            'warn'
                        );
                    }
                });
            }
            
            interceptPerformance() {
                if (window.performance) {
                    const self = this;
                    
                    // –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç performance.now –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
                    
                    try {
                        const originalMark = performance.mark;
                        if (originalMark) {
                            performance.mark = function(name) {
                                self.logger.logToPage(
                                    `‚è±Ô∏è <b>performance.mark</b>: ${name}`,
                                    'info'
                                );
                                return originalMark.call(this, name);
                            };
                        }
                    } catch (error) {
                        self.logger.logToPage(
                            `‚ö†Ô∏è <b>performance.mark</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                            'warn'
                        );
                    }
                    
                    try {
                        const originalMeasure = performance.measure;
                        if (originalMeasure) {
                            performance.measure = function(name, startMark, endMark) {
                                self.logger.logToPage(
                                    `‚è±Ô∏è <b>performance.measure</b>: ${name}`,
                                    'info'
                                );
                                return originalMeasure.call(this, name, startMark, endMark);
                            };
                        }
                    } catch (error) {
                        self.logger.logToPage(
                            `‚ö†Ô∏è <b>performance.measure</b> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω: ${error.message}`,
                            'warn'
                        );
                    }
                }
            }
            
            interceptMutationObserver() {
                if (window.MutationObserver) {
                    this.originals.MutationObserver = window.MutationObserver;
                    const self = this;
                    window.MutationObserver = function(callback) {
                        self.logger.logToPage(
                            `üëÅÔ∏è <b>MutationObserver</b> —Å–æ–∑–¥–∞–Ω`,
                            'info'
                        );
                        return new self.originals.MutationObserver(callback);
                    };
                }
            }
            
            interceptIntersectionObserver() {
                if (window.IntersectionObserver) {
                    this.originals.IntersectionObserver = window.IntersectionObserver;
                    const self = this;
                    window.IntersectionObserver = function(callback, options) {
                        self.logger.logToPage(
                            `üëÅÔ∏è <b>IntersectionObserver</b> —Å–æ–∑–¥–∞–Ω`,
                            'info'
                        );
                        return new self.originals.IntersectionObserver(callback, options);
                    };
                }
            }
            
            interceptResizeObserver() {
                if (window.ResizeObserver) {
                    this.originals.ResizeObserver = window.ResizeObserver;
                    const self = this;
                    window.ResizeObserver = function(callback) {
                        self.logger.logToPage(
                            `üìè <b>ResizeObserver</b> —Å–æ–∑–¥–∞–Ω`,
                            'info'
                        );
                        return new self.originals.ResizeObserver(callback);
                    };
                }
            }
            
            restoreOriginals() {
                // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                if (this.originals.eval) window.eval = this.originals.eval;
                if (this.originals.Function) window.Function = this.originals.Function;
                if (this.originals.setTimeout) window.setTimeout = this.originals.setTimeout;
                if (this.originals.setInterval) window.setInterval = this.originals.setInterval;
                if (this.originals.documentWrite) document.write = this.originals.documentWrite;
                if (this.originals.fetch) window.fetch = this.originals.fetch;
                
                // –°–µ—Ç–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                if (this.originals.XMLHttpRequest) window.XMLHttpRequest = this.originals.XMLHttpRequest;
                if (this.originals.WebSocket) window.WebSocket = this.originals.WebSocket;
                
                // WebRTC
                if (this.originals.RTCPeerConnection) window.RTCPeerConnection = this.originals.RTCPeerConnection;
                
                // Workers
                if (this.originals.Worker) window.Worker = this.originals.Worker;
                
                // Observers
                if (this.originals.MutationObserver) window.MutationObserver = this.originals.MutationObserver;
                if (this.originals.IntersectionObserver) window.IntersectionObserver = this.originals.IntersectionObserver;
                if (this.originals.ResizeObserver) window.ResizeObserver = this.originals.ResizeObserver;
            }
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            updateStats() {
                document.getElementById('interception-count').textContent = this.interceptionCount;
                document.getElementById('status').textContent = this.isActive ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω';
                document.getElementById('status').style.color = this.isActive ? '#4CAF50' : '#F44336';
            }
            
            getStats() {
                return {
                    totalInterceptions: this.interceptionCount,
                    active: this.isActive
                };
            }
        }

        // ==================== –ü–†–û–°–¢–ê–Ø –ó–ê–ì–†–£–ó–ö–ê JS –§–ê–ô–õ–û–í ====================
        let loadedScripts = new Set();
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ JS —Ñ–∞–π–ª–∞
        function loadScriptFile() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            
            const fileName = document.getElementById('scriptFileName').value.trim();
            if (!fileName) {
                logger.logToPage('‚ö†Ô∏è <b>–ó–∞–≥—Ä—É–∑–∫–∞</b>: –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞', 'warn');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª —É–∂–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
            if (loadedScripts.has(fileName)) {
                logger.logToPage(`‚ö†Ô∏è <b>–ó–∞–≥—Ä—É–∑–∫–∞</b>: –§–∞–π–ª —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω: ${fileName}`, 'warn');
                return;
            }
            
            logger.logToPage(`üì• <b>–ó–∞–≥—Ä—É–∑–∫–∞</b>: –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª ${fileName}`, 'script');
            
            const script = document.createElement('script');
            script.src = fileName;
            script.async = true;
            
            script.onload = () => {
                loadedScripts.add(fileName);
                logger.logToPage(`‚úÖ <b>–ó–∞–≥—Ä—É–∑–∫–∞</b>: –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω: ${fileName}`, 'script');
            };
            
            script.onerror = (error) => {
                logger.logToPage(`‚ùå <b>–ó–∞–≥—Ä—É–∑–∫–∞</b>: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ${fileName}`, 'error');
            };
            
            document.head.appendChild(script);
        }
        
        // –ê–Ω–∞–ª–∏–∑ JS —Ñ–∞–π–ª–∞
        function analyzeScriptFile() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            
            const fileName = document.getElementById('scriptFileName').value.trim();
            if (!fileName) {
                logger.logToPage('‚ö†Ô∏è <b>–ê–Ω–∞–ª–∏–∑</b>: –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞', 'warn');
                return;
            }
            
            logger.logToPage(`üîç <b>–ê–Ω–∞–ª–∏–∑</b>: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–∞–π–ª ${fileName}`, 'analysis');
            
            fetch(fileName)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(content => {
                    analyzeScriptContent(content, fileName);
                })
                .catch(error => {
                    logger.logToPage(`‚ùå <b>–ê–Ω–∞–ª–∏–∑</b>: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ${error.message}`, 'error');
                });
        }
        
        // –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
        function analyzeScriptContent(content, fileName) {
            const suspiciousPatterns = [
                { pattern: /eval\s*\(/g, name: 'eval() –≤—ã–∑–æ–≤—ã', severity: 'high' },
                { pattern: /Function\s*\(/g, name: 'Function() –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä', severity: 'high' },
                { pattern: /document\.write/g, name: 'document.write', severity: 'medium' },
                { pattern: /innerHTML\s*=/g, name: 'innerHTML –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ', severity: 'medium' },
                { pattern: /setTimeout\s*\(/g, name: 'setTimeout –≤—ã–∑–æ–≤—ã', severity: 'low' },
                { pattern: /XMLHttpRequest/g, name: 'XMLHttpRequest', severity: 'low' },
                { pattern: /fetch\s*\(/g, name: 'fetch –≤—ã–∑–æ–≤—ã', severity: 'low' },
                { pattern: /WebSocket/g, name: 'WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è', severity: 'low' },
                { pattern: /localStorage/g, name: 'localStorage –æ–ø–µ—Ä–∞—Ü–∏–∏', severity: 'low' },
                { pattern: /sessionStorage/g, name: 'sessionStorage –æ–ø–µ—Ä–∞—Ü–∏–∏', severity: 'low' },
                { pattern: /crypto\./g, name: 'crypto –æ–ø–µ—Ä–∞—Ü–∏–∏', severity: 'medium' },
                { pattern: /navigator\./g, name: 'navigator API', severity: 'low' },
                { pattern: /window\.open/g, name: 'window.open –≤—ã–∑–æ–≤—ã', severity: 'medium' },
                { pattern: /postMessage/g, name: 'postMessage –≤—ã–∑–æ–≤—ã', severity: 'medium' },
                { pattern: /addEventListener/g, name: 'event listeners', severity: 'low' },
                { pattern: /setInterval/g, name: 'setInterval –≤—ã–∑–æ–≤—ã', severity: 'low' },
                { pattern: /Promise/g, name: 'Promise –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ', severity: 'low' },
                { pattern: /async\s+function/g, name: 'async —Ñ—É–Ω–∫—Ü–∏–∏', severity: 'low' },
                { pattern: /await\s+/g, name: 'await –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã', severity: 'low' },
                { pattern: /class\s+\w+/g, name: 'ES6 –∫–ª–∞—Å—Å—ã', severity: 'low' },
                { pattern: /=>\s*{/g, name: '—Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏', severity: 'low' },
                { pattern: /import\s+/g, name: 'ES6 –∏–º–ø–æ—Ä—Ç—ã', severity: 'low' },
                { pattern: /export\s+/g, name: 'ES6 —ç–∫—Å–ø–æ—Ä—Ç—ã', severity: 'low' }
            ];
            
            let totalWarnings = 0;
            let highRiskCount = 0;
            let mediumRiskCount = 0;
            let lowRiskCount = 0;
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            const lines = content.split('\n').length;
            const chars = content.length;
            const words = content.split(/\s+/).length;
            
            logger.logToPage(`üîç <b>–ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–ø—Ç–∞</b>: ${fileName}`, 'analysis');
            logger.logToPage(`üìä <b>–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞</b>: ${lines} —Å—Ç—Ä–æ–∫, ${chars} —Å–∏–º–≤–æ–ª–æ–≤, ${words} —Å–ª–æ–≤`, 'analysis');
            
            suspiciousPatterns.forEach(({ pattern, name, severity }) => {
                const matches = content.match(pattern);
                if (matches) {
                    const count = matches.length;
                    totalWarnings += count;
                    
                    // –ü–æ–¥—Å—á–µ—Ç –ø–æ —É—Ä–æ–≤–Ω—è–º —Ä–∏—Å–∫–∞
                    if (severity === 'high') highRiskCount += count;
                    else if (severity === 'medium') mediumRiskCount += count;
                    else if (severity === 'low') lowRiskCount += count;
                    
                    const severityColor = {
                        'high': '#F44336',
                        'medium': '#FF9800',
                        'low': '#2196F3'
                    }[severity];
                    
                    logger.logToPage(
                        `üîç <b>–ê–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–ø—Ç–∞</b>: ${name} (${count}x) - <span style="color: ${severityColor}">${severity}</span>`,
                        'analysis'
                    );
                }
            });
            
            // –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            logger.logToPage(
                `üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∏—Å–∫–æ–≤</b>: –í—ã—Å–æ–∫–∏–π: ${highRiskCount}, –°—Ä–µ–¥–Ω–∏–π: ${mediumRiskCount}, –ù–∏–∑–∫–∏–π: ${lowRiskCount}`,
                'analysis'
            );
            
            logger.logToPage(
                `üìä <b>–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω</b>: ${fileName} | –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: ${totalWarnings}`,
                totalWarnings > 10 ? 'error' : totalWarnings > 5 ? 'warn' : 'analysis'
            );
            
            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            if (highRiskCount > 0) {
                logger.logToPage(`‚ö†Ô∏è <b>–í–ù–ò–ú–ê–ù–ò–ï</b>: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã! –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç—â–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.`, 'error');
            }
            if (mediumRiskCount > 3) {
                logger.logToPage(`‚ö†Ô∏è <b>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</b>: –ú–Ω–æ–≥–æ —Å—Ä–µ–¥–Ω–∏—Ö —Ä–∏—Å–∫–æ–≤. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞.`, 'warn');
            }
            if (totalWarnings === 0) {
                logger.logToPage(`‚úÖ <b>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</b>: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.`, 'analysis');
            }
        }

        // ==================== –¢–ï–°–¢–û–í–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function testEval() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üß™ <b>–¢–µ—Å—Ç eval...</b>', 'info');
            try {
                const result = eval('2 + 2');
                logger.logToPage(`‚úÖ eval —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: ${result}`, 'info');
            } catch (error) {
                logger.logToPage(`‚ùå eval —Ç–µ—Å—Ç –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testFunction() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üß™ <b>–¢–µ—Å—Ç Function...</b>', 'info');
            try {
                const dynamicFunc = new Function('a', 'b', 'return a + b');
                const result = dynamicFunc(5, 3);
                logger.logToPage(`‚úÖ Function —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: ${result}`, 'info');
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
                logger.logToPage('üîç <b>–¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É Uq3o4_B3Mp.js...</b>', 'info');
                document.getElementById('scriptFileName').value = 'Uq3o4_B3Mp.js';
                loadScriptFile();
            } catch (error) {
                logger.logToPage(`‚ùå Function —Ç–µ—Å—Ç –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        

        function testSetTimeout() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üß™ <b>–¢–µ—Å—Ç setTimeout...</b>', 'info');
            setTimeout(() => {
                logger.logToPage('‚úÖ setTimeout —Å—Ä–∞–±–æ—Ç–∞–ª', 'info');
            }, 1000);
        }

        function testFetch() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üß™ <b>–¢–µ—Å—Ç fetch...</b>', 'info');
            fetch('https://jsonplaceholder.typicode.com/todos/1')
                .then(response => response.json())
                .then(data => {
                    logger.logToPage('‚úÖ fetch —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω', 'info');
                })
                .catch(error => {
                    logger.logToPage(`‚ùå fetch —Ç–µ—Å—Ç –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                });
        }

        function testDocumentWrite() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üß™ <b>–¢–µ—Å—Ç document.write...</b>', 'info');
            document.write('<div style="color:red;">–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç</div>');
        }

        function testWebSocket() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üîå <b>–¢–µ—Å—Ç WebSocket...</b>', 'info');
            try {
                const ws = new WebSocket('wss://echo.websocket.org');
                ws.onopen = () => {
                    logger.logToPage('‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω', 'info');
                    ws.send('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ');
                };
                ws.onmessage = (event) => {
                    logger.logToPage(`üì® WebSocket —Å–æ–æ–±—â–µ–Ω–∏–µ: ${event.data}`, 'info');
                    ws.close();
                };
            } catch (error) {
                logger.logToPage(`‚ùå WebSocket –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testStorage() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üíæ <b>–¢–µ—Å—Ç Storage...</b>', 'info');
            try {
                localStorage.setItem('test_key', 'test_value');
                const value = localStorage.getItem('test_key');
                logger.logToPage(`‚úÖ localStorage: ${value}`, 'info');
                
                sessionStorage.setItem('session_key', 'session_value');
                const sessionValue = sessionStorage.getItem('session_key');
                logger.logToPage(`‚úÖ sessionStorage: ${sessionValue}`, 'info');
            } catch (error) {
                logger.logToPage(`‚ùå Storage –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testGeolocation() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üìç <b>–¢–µ—Å—Ç Geolocation...</b>', 'info');
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        logger.logToPage(`‚úÖ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: ${position.coords.latitude}, ${position.coords.longitude}`, 'info');
                    },
                    (error) => {
                        logger.logToPage(`‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                    }
                );
            } else {
                logger.logToPage('‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
            }
        }

        function testMediaDevices() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üì∑ <b>–¢–µ—Å—Ç MediaDevices...</b>', 'info');
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                    .then(stream => {
                        logger.logToPage('‚úÖ MediaDevices: –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É –ø–æ–ª—É—á–µ–Ω', 'info');
                        stream.getTracks().forEach(track => track.stop());
                    })
                    .catch(error => {
                        logger.logToPage(`‚ùå MediaDevices –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                    });
            } else {
                logger.logToPage('‚ùå MediaDevices –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
            }
        }

        function testCrypto() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üîê <b>–¢–µ—Å—Ç Crypto...</b>', 'info');
            try {
                const array = new Uint8Array(16);
                crypto.getRandomValues(array);
                logger.logToPage(`‚úÖ Crypto: ${array.length} —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç`, 'info');
            } catch (error) {
                logger.logToPage(`‚ùå Crypto –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testNotifications() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üîî <b>–¢–µ—Å—Ç Notifications...</b>', 'info');
            if (window.Notification) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        new Notification('–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ', {
                            body: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
                            icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üîî</text></svg>'
                        });
                        logger.logToPage('‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ', 'info');
                    } else {
                        logger.logToPage('‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ', 'error');
                    }
                });
            } else {
                logger.logToPage('‚ùå Notifications –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
            }
        }

        function testClipboard() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üìã <b>–¢–µ—Å—Ç Clipboard...</b>', 'info');
            if (navigator.clipboard) {
                navigator.clipboard.writeText('–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞')
                    .then(() => {
                        logger.logToPage('‚úÖ –¢–µ–∫—Å—Ç –∑–∞–ø–∏—Å–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'info');
                        return navigator.clipboard.readText();
                    })
                    .then(text => {
                        logger.logToPage(`‚úÖ –¢–µ–∫—Å—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω –∏–∑ –±—É—Ñ–µ—Ä–∞: ${text}`, 'info');
                    })
                    .catch(error => {
                        logger.logToPage(`‚ùå Clipboard –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                    });
            } else {
                logger.logToPage('‚ùå Clipboard –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'error');
            }
        }

        function testHistory() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üìú <b>–¢–µ—Å—Ç History...</b>', 'info');
            try {
                history.pushState({ test: 'data' }, 'Test Title', '#test');
                logger.logToPage('‚úÖ history.pushState –≤—ã–ø–æ–ª–Ω–µ–Ω', 'info');
                
                history.replaceState({ test: 'replaced' }, 'Replaced Title', '#replaced');
                logger.logToPage('‚úÖ history.replaceState –≤—ã–ø–æ–ª–Ω–µ–Ω', 'info');
            } catch (error) {
                logger.logToPage(`‚ùå History –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testLocation() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üåç <b>–¢–µ—Å—Ç Location...</b>', 'info');
            try {
                const currentUrl = location.href;
                logger.logToPage(`‚úÖ –¢–µ–∫—É—â–∏–π URL: ${currentUrl}`, 'info');
                
                // –ù–µ –≤—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥, —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏
                logger.logToPage('‚úÖ Location —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã', 'info');
            } catch (error) {
                logger.logToPage(`‚ùå Location –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testConsole() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üñ•Ô∏è <b>–¢–µ—Å—Ç Console...</b>', 'info');
            console.log('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ log');
            console.warn('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ warn');
            console.error('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ error');
            console.info('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ info');
            console.debug('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ debug');
            logger.logToPage('‚úÖ Console –º–µ—Ç–æ–¥—ã –≤—ã–∑–≤–∞–Ω—ã', 'info');
        }

        function testPerformance() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('‚è±Ô∏è <b>–¢–µ—Å—Ç Performance...</b>', 'info');
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º Date.now() –≤–º–µ—Å—Ç–æ performance.now() –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
                const start = Date.now();
                performance.mark('test-start');
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç—É
                for (let i = 0; i < 1000; i++) {
                    Math.random();
                }
                
                performance.mark('test-end');
                performance.measure('test-duration', 'test-start', 'test-end');
                
                const end = Date.now();
                logger.logToPage(`‚úÖ Performance: ${(end - start)}ms`, 'info');
            } catch (error) {
                logger.logToPage(`‚ùå Performance –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }

        function testObservers() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.logToPage('üëÅÔ∏è <b>–¢–µ—Å—Ç Observers...</b>', 'info');
            try {
                // MutationObserver
                const mutationObserver = new MutationObserver((mutations) => {
                    logger.logToPage(`‚úÖ MutationObserver: ${mutations.length} –∏–∑–º–µ–Ω–µ–Ω–∏–π`, 'info');
                });
                
                // IntersectionObserver
                const intersectionObserver = new IntersectionObserver((entries) => {
                    logger.logToPage(`‚úÖ IntersectionObserver: ${entries.length} –∑–∞–ø–∏—Å–µ–π`, 'info');
                });
                
                // ResizeObserver
                if (window.ResizeObserver) {
                    const resizeObserver = new ResizeObserver((entries) => {
                        logger.logToPage(`‚úÖ ResizeObserver: ${entries.length} –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞`, 'info');
                    });
                }
                
                logger.logToPage('‚úÖ –í—Å–µ Observers —Å–æ–∑–¥–∞–Ω—ã', 'info');
            } catch (error) {
                logger.logToPage(`‚ùå Observers –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }


        // ==================== –û–ë–ï–†–¢–ö–ò –î–õ–Ø –ö–ù–û–ü–û–ö ====================
        function startInterception() {
            if (!interceptor) {
                console.error('Interceptor –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            interceptor.startInterception();
        }

        function stopInterception() {
            if (!interceptor) {
                console.error('Interceptor –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            interceptor.stopInterception();
        }

        function clearOutput() {
            if (!logger) {
                console.error('Logger –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }
            logger.clearOutput();
        }

        // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–ê–ù–ï–õ–¨–Æ –õ–û–ì–ê ====================
        function toggleLogPanel() {
            const panel = document.querySelector('.output-panel');
            const button = document.getElementById('toggleLogPanel');
            
            if (panel.style.display === 'none' || panel.style.visibility === 'hidden') {
                panel.style.display = 'block';
                panel.style.visibility = 'visible';
                button.textContent = 'üìã –°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å –ª–æ–≥–∞';
                button.style.background = '#4CAF50';
            } else {
                panel.style.display = 'none';
                panel.style.visibility = 'hidden';
                button.textContent = 'üìã –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞–Ω–µ–ª—å –ª–æ–≥–∞';
                button.style.background = '#FF9800';
            }
        }
        
        // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–õ–ê–î–û–ß–ù–´–ú –†–ï–ñ–ò–ú–û–ú ====================
        function toggleDebugMode() {
            if (logger) {
                logger.debugMode = !logger.debugMode;
                const button = document.getElementById('debugToggle');
                
                if (logger.debugMode) {
                    button.textContent = 'üêõ –û—Ç–ª–∞–¥–∫–∞: –í–ö–õ';
                    button.style.background = '#4CAF50';
                    logger.logToPage('üêõ <b>–û—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω</b> - –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å', 'info');
                } else {
                    button.textContent = 'üêõ –û—Ç–ª–∞–¥–∫–∞: –í–´–ö–õ';
                    button.style.background = '#666';
                    logger.logToPage('üêõ <b>–û—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º –≤—ã–∫–ª—é—á–µ–Ω</b> - –ª–æ–≥–∏ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å', 'info');
                }
            }
        }
        
        // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ê–ó–ú–ï–†–û–ú –ü–ê–ù–ï–õ–ï–ô ====================
        function resizeMainPanel(size) {
            const container = document.querySelector('.container');
            if (!container) return;
            
            if (size === 'small') {
                container.style.width = '400px';
                container.style.height = '120px';
                container.style.maxHeight = '120px';
                logger.logToPage('üìè <b>–û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä', 'info');
            } else if (size === 'large') {
                container.style.width = 'calc(100vw - 20px)';
                container.style.height = '300px';
                container.style.maxHeight = '300px';
                logger.logToPage('üìè <b>–û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä', 'info');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ª–æ–≥–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏
            setTimeout(adjustLogPanelPosition, 100);
        }
        
        function resizeLogPanel(size) {
            const logPanel = document.querySelector('.output-panel');
            if (!logPanel) return;
            
            if (size === 'small') {
                logPanel.style.width = '400px';
                logPanel.style.height = '200px';
                logger.logToPage('üìè <b>–ü–∞–Ω–µ–ª—å –ª–æ–≥–∞</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä', 'info');
            } else if (size === 'large') {
                logPanel.style.width = 'calc(100vw - 20px)';
                logPanel.style.height = 'calc(100vh - 350px)';
                logger.logToPage('üìè <b>–ü–∞–Ω–µ–ª—å –ª–æ–≥–∞</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä', 'info');
            }
        }
        
        function resizeMiddlePanel(size) {
            const middlePanel = document.querySelector('.middle-panel');
            if (!middlePanel) return;
            
            if (size === 'small') {
                middlePanel.style.height = '80px';
                logger.logToPage('üìè <b>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –º–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä', 'info');
            } else if (size === 'large') {
                middlePanel.style.height = '200px';
                logger.logToPage('üìè <b>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</b>: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä', 'info');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ª–æ–≥–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª–∏
            setTimeout(adjustLogPanelPosition, 100);
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        let logger, interceptor;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        function initializeSystem() {
            if (!logger) {
                logger = new OutputLogger();
            }
            if (!interceptor) {
                interceptor = new SystemInterceptor();
            }

        // –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        setInterval(() => interceptor.updateStats(), 1000);

        // –°—Ç–∞—Ä—Ç–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        logger.logToPage('üü¢ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ', 'info');
        logger.logToPage('–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—Ç" –¥–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞', 'info');
        logger.logToPage('üì¶ –ó–∞–≥—Ä—É–∑–∫–∞ JS —Ñ–∞–π–ª–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø–∞–Ω–µ–ª–∏ –≤—ã—à–µ', 'info');
        logger.logToPage('üîç –õ–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —ç—Ç–æ–π –ø–∞–Ω–µ–ª–∏', 'analysis');
        logger.logToPage('üìÅ –õ–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å', 'script');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeSystem);
        } else {
            initializeSystem();
        }
        
        // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–Ω–µ–ª—å—é
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                toggleLogPanel();
            }
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ª–æ–≥–∞ –∫ –Ω–æ–≤—ã–º –∑–∞–ø–∏—Å—è–º
        function setupAutoScroll() {
            const logPanel = document.querySelector('.output-panel');
            
            if (logPanel) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∏–∑—É –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                            logPanel.scrollTop = logPanel.scrollHeight;
                        }
                    });
                });
                
                observer.observe(logPanel, {
                    childList: true,
                    subtree: true
                });
            }
        }
        
        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –ª–æ–≥–∞ –ø–æ–¥ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª—å—é
        function adjustLogPanelPosition() {
            const middlePanel = document.querySelector('.middle-panel');
            const logPanel = document.querySelector('.output-panel');
            
            if (middlePanel && logPanel) {
                const middlePanelRect = middlePanel.getBoundingClientRect();
                const newTop = middlePanelRect.bottom + 10;
                const newHeight = window.innerHeight - newTop - 10;
                
                logPanel.style.top = newTop + 'px';
                logPanel.style.height = Math.max(200, newHeight) + 'px';
                logPanel.style.left = '10px';
                logPanel.style.right = '10px';
                logPanel.style.width = 'calc(100vw - 20px)';
            }
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            setupAutoScroll();
            adjustLogPanelPosition();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', adjustLogPanelPosition);
        }, 1000);
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        function testAllButtons() {
            console.log('=== –¢–ï–°–¢ –í–°–ï–• –ö–ù–û–ü–û–ö ===');
            console.log('Logger:', logger ? '‚úÖ' : '‚ùå');
            console.log('Interceptor:', interceptor ? '‚úÖ' : '‚ùå');
            
            // –¢–µ—Å—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            const elements = [
                'scriptFileName'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                console.log(`${id}:`, element ? '‚úÖ' : '‚ùå');
            });
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(testAllButtons, 2000);
        
        // –¢–µ—Å—Ç –ª–æ–≥–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
        function testAnalysisLogs() {
            if (logger) {
                console.log('–¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞...');
                logger.logToPage('üß™ <b>–¢–µ—Å—Ç –ª–æ–≥–æ–≤ –∞–Ω–∞–ª–∏–∑–∞</b>: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'analysis');
                logger.logToPage('üß™ <b>–¢–µ—Å—Ç –ª–æ–≥–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤</b>: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'script');
                logger.logToPage('üß™ <b>–¢–µ—Å—Ç –æ–±—ã—á–Ω—ã—Ö –ª–æ–≥–æ–≤</b>: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'info');
            }
        }
        
        // –¢–µ—Å—Ç –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(testAnalysisLogs, 3000);
    </script>
</body>
</html>
